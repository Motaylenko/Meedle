# ‚úÖ –ì–û–¢–û–í–û! Prisma —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ —É –≤–∞—à –ø—Ä–æ—î–∫—Ç

## üì¶ –©–æ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ:

### 1. **–§–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:**
- ‚úÖ `backend/.env` - –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –¥–æ –ë–î
- ‚úÖ `backend/prisma/schema.prisma` - —Å—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- ‚úÖ `backend/prisma/seed.js` - –ø–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
- ‚úÖ `backend/src/prisma.js` - Prisma –∫–ª—ñ—î–Ω—Ç
- ‚úÖ `backend/src/index-prisma.js` - –Ω–æ–≤–∏–π backend –∑ Prisma

### 2. **–û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏:**
- ‚úÖ `backend/package.json` - –¥–æ–¥–∞–Ω–æ Prisma —Å–∫—Ä–∏–ø—Ç–∏

---

## üöÄ –©–û –†–û–ë–ò–¢–ò –î–ê–õ–Ü:

### **–í–∞—Ä—ñ–∞–Ω—Ç 1: –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**

–í–∏–∫–æ–Ω–∞–π—Ç–µ —Ü—ñ –∫–æ–º–∞–Ω–¥–∏ –ø–æ —á–µ—Ä–∑—ñ:

```bash
# 1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É backend
cd backend

# 2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ)
npm install

# 3. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ Prisma Client
npm run db:generate

# 4. –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ —Å—Ö–µ–º—É –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (–±–µ–∑ –º—ñ–≥—Ä–∞—Ü—ñ–π)
npm run db:push

# 5. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
npm run db:seed

# 6. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä –∑ Prisma
node src/index-prisma.js
```

### **–í–∞—Ä—ñ–∞–Ω—Ç 2: –ó –º—ñ–≥—Ä–∞—Ü—ñ—è–º–∏ (–¥–ª—è production)**

```bash
cd backend
npm install
npm run db:generate
npm run db:migrate  # –°—Ç–≤–æ—Ä–∏—Ç—å —Ñ–∞–π–ª–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π
npm run db:seed
node src/index-prisma.js
```

---

## üîÑ –ó–∞–º—ñ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ backend –Ω–∞ –Ω–æ–≤–∏–π:

–ö–æ–ª–∏ –ø–µ—Ä–µ–∫–æ–Ω–∞—î—Ç–µ—Å—å, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î, –∑–∞–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞—Ä–∏–π —Ñ–∞–π–ª:

### Windows (PowerShell):
```powershell
cd backend\src
Move-Item index.js index-old.js
Move-Item index-prisma.js index.js
```

### –ê–±–æ –≤—Ä—É—á–Ω—É:
1. –ü–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ `backend/src/index.js` ‚Üí `backend/src/index-old.js`
2. –ü–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ `backend/src/index-prisma.js` ‚Üí `backend/src/index.js`

---

## üê≥ –†–æ–±–æ—Ç–∞ –∑ Docker:

### –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö:
```bash
docker-compose up db -d
```

### –í–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤ Docker:
```bash
docker-compose exec backend npm run db:generate
docker-compose exec backend npm run db:push
docker-compose exec backend npm run db:seed
```

### –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–µ—Å—å –ø—Ä–æ—î–∫—Ç:
```bash
docker-compose up
```

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏:

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î:
```bash
curl http://localhost:5000/api/health
```

–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "status": "ok",
  "timestamp": "2026-02-05T...",
  "database": "connected"
}
```

### 2. –û—Ç—Ä–∏–º–∞–π—Ç–µ –∫—É—Ä—Å–∏:
```bash
curl http://localhost:5000/api/courses
```

### 3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Prisma Studio (GUI –¥–ª—è –ë–î):
```bash
npm run db:studio
```

–í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ `http://localhost:5555`

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

```
users (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)
  ‚îú‚îÄ‚îÄ user_settings (–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
  ‚îú‚îÄ‚îÄ enrollments (–∑–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å–∏)
  ‚îú‚îÄ‚îÄ grades (–æ—Ü—ñ–Ω–∫–∏)
  ‚îî‚îÄ‚îÄ tasks (–∑–∞–≤–¥–∞–Ω–Ω—è)

courses (–∫—É—Ä—Å–∏)
  ‚îú‚îÄ‚îÄ enrollments (—Å—Ç—É–¥–µ–Ω—Ç–∏)
  ‚îú‚îÄ‚îÄ schedules (—Ä–æ–∑–∫–ª–∞–¥)
  ‚îú‚îÄ‚îÄ grades (–æ—Ü—ñ–Ω–∫–∏)
  ‚îî‚îÄ‚îÄ tasks (–∑–∞–≤–¥–∞–Ω–Ω—è)

leaderboard (—Ä–µ–π—Ç–∏–Ω–≥)
```

---

## üõ†Ô∏è –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

### –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö:
```bash
npm run db:studio
```

### –°–∫–∏–¥–∞–Ω–Ω—è –ë–î (–û–ë–ï–†–ï–ñ–ù–û!):
```bash
npx prisma migrate reset
```

### –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma Client:
```bash
npm run db:generate
```

### –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω —Å—Ö–µ–º–∏:
```bash
npm run db:push
```

---

## ‚ö° –®–≤–∏–¥–∫–∏–π —Ç–µ—Å—Ç:

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–∞–Ω–¥, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

1. ‚úÖ Backend –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
2. ‚úÖ `/api/health` –ø–æ–≤–µ—Ä—Ç–∞—î `"database": "connected"`
3. ‚úÖ `/api/courses` –ø–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å—ñ–≤ –∑ –ë–î
4. ‚úÖ `/api/user` –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
5. ‚úÖ Prisma Studio –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —ñ –ø–æ–∫–∞–∑—É—î –¥–∞–Ω—ñ

---

## üÜò –ü—Ä–æ–±–ª–µ–º–∏?

### –ü–æ–º–∏–ª–∫–∞: "Can't reach database server"
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Docker
docker-compose up db -d

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∞—Ü—é—î
docker-compose ps
```

### –ü–æ–º–∏–ª–∫–∞: "Prisma Client not found"
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
npm run db:generate
```

### –ü–æ–º–∏–ª–∫–∞: "Table does not exist"
**–†—ñ—à–µ–Ω–Ω—è:**
```bash
npm run db:push
npm run db:seed
```

---

## üìù –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):

1. **–î–æ–¥–∞–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é** (JWT, Passport.js)
2. **–î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é** (Joi, Zod)
3. **–î–æ–¥–∞–π—Ç–µ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é** –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤
4. **–î–æ–¥–∞–π—Ç–µ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é —Ç–∞ –ø–æ—à—É–∫**
5. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ production deployment**

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

- üìñ [PRISMA_SETUP.md](./PRISMA_SETUP.md) - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
- üåê [Prisma Docs](https://www.prisma.io/docs)
- üéì [Prisma Tutorial](https://www.prisma.io/docs/getting-started)

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–í–∞—à –ø—Ä–æ—î–∫—Ç —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Prisma ORM –∑ PostgreSQL! üéâ

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø–∏—Ç–∞–Ω–Ω—è, –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å!
