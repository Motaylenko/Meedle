# üéØ Prisma Integration - –ö–æ—Ä–æ—Ç–∫–∏–π –æ–≥–ª—è–¥

## ‚úÖ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

–Ø –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞–≤ **Prisma ORM** —É –≤–∞—à –ø—Ä–æ—î–∫—Ç Meedle! –û—Å—å —â–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ:

### üìÅ –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:

```
backend/
‚îú‚îÄ‚îÄ .env                          # ‚úÖ –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ .env.example                  # ‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma            # ‚úÖ –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.js                  # ‚úÖ –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ prisma.js                # ‚úÖ Prisma –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ index.js                 # ‚ö†Ô∏è  –°—Ç–∞—Ä–∏–π –∫–æ–¥ (mock data)
‚îÇ   ‚îî‚îÄ‚îÄ index-prisma.js          # ‚úÖ –ù–æ–≤–∏–π –∫–æ–¥ (Prisma)
‚îî‚îÄ‚îÄ package.json                 # ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –∑ Prisma —Å–∫—Ä–∏–ø—Ç–∞–º–∏

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
‚îú‚îÄ‚îÄ PRISMA_QUICKSTART.md         # ‚úÖ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ PRISMA_SETUP.md              # ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
```

---

## üöÄ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢ (3 —Ö–≤–∏–ª–∏–Ω–∏):

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```bash
cd backend
npm install
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Prisma
```bash
npm run db:generate
npm run db:push
npm run db:seed
```

### –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å—Ç—ñ—Ç—å –Ω–æ–≤–∏–π backend
```bash
node src/index-prisma.js
```

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É
–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ: http://localhost:5000/api/health

–ú–∞—î –±—É—Ç–∏:
```json
{
  "status": "ok",
  "database": "connected"
}
```

---

## üìä –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

### –¢–∞–±–ª–∏—Ü—ñ:
- **users** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- **user_settings** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **courses** - –∫—É—Ä—Å–∏
- **enrollments** - –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å–∏ (Many-to-Many)
- **schedules** - —Ä–æ–∑–∫–ª–∞–¥
- **grades** - –æ—Ü—ñ–Ω–∫–∏
- **tasks** - –∑–∞–≤–¥–∞–Ω–Ω—è
- **leaderboard** - —Ä–µ–π—Ç–∏–Ω–≥

### –ó–≤'—è–∑–∫–∏:
```
User ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ UserSettings (1:1)
       ‚îú‚îÄ‚îÄ Enrollment ‚îÄ‚îÄ‚îÄ‚îÄ Course (M:N)
       ‚îú‚îÄ‚îÄ Grade ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Course (M:1)
       ‚îî‚îÄ‚îÄ Task ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Course (M:1)

Course ‚îÄ‚î¨‚îÄ‚îÄ Schedule (1:M)
        ‚îú‚îÄ‚îÄ Grade (1:M)
        ‚îî‚îÄ‚îÄ Task (1:M)
```

---

## üîÑ –ó–∞–º—ñ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥—É:

–ö–æ–ª–∏ –≤—Å–µ –ø—Ä–∞—Ü—é—î, –∑–∞–º—ñ–Ω—ñ—Ç—å —Ñ–∞–π–ª–∏:

```bash
# Windows PowerShell
cd backend\src
Move-Item index.js index-old.js
Move-Item index-prisma.js index.js
```

–ê–±–æ –≤—Ä—É—á–Ω—É –ø–µ—Ä–µ–π–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª–∏.

---

## üê≥ Docker:

### –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö:
```bash
docker-compose up db -d
```

### –í–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó:
```bash
docker-compose exec backend npm run db:generate
docker-compose exec backend npm run db:push
docker-compose exec backend npm run db:seed
```

---

## üõ†Ô∏è –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `npm run db:generate` | –ì–µ–Ω–µ—Ä—É—î Prisma Client |
| `npm run db:push` | –ó–∞—Å—Ç–æ—Å–æ–≤—É—î —Å—Ö–µ–º—É –¥–æ –ë–î |
| `npm run db:migrate` | –°—Ç–≤–æ—Ä—é—î –º—ñ–≥—Ä–∞—Ü—ñ—ó |
| `npm run db:seed` | –ó–∞–ø–æ–≤–Ω—é—î –ë–î –¥–∞–Ω–∏–º–∏ |
| `npm run db:studio` | –í—ñ–¥–∫—Ä–∏–≤–∞—î GUI –¥–ª—è –ë–î |

---

## üìù –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

```javascript
const prisma = require('./prisma');

// –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
const users = await prisma.user.findMany();

// –û—Ç—Ä–∏–º–∞—Ç–∏ –∫—É—Ä—Å–∏ –∑ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
const courses = await prisma.course.findMany({
  include: {
    enrollments: {
      include: {
        user: true
      }
    }
  }
});

// –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
const task = await prisma.task.create({
  data: {
    title: '–ù–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è',
    description: '–û–ø–∏—Å',
    deadline: new Date('2026-02-10'),
    userId: 1,
    courseId: 1,
    points: 100
  }
});
```

---

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:

1. ‚úÖ `.env` –≤–∂–µ –¥–æ–¥–∞–Ω–æ –¥–æ `.gitignore`
2. ‚úÖ Prisma –≤–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `package.json`
3. ‚úÖ –°—Ö–µ–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∞—à–æ–≥–æ mock data
4. ‚úÖ Seed —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
5. ‚ö†Ô∏è  –°—Ç–∞—Ä–∏–π `index.js` –∑–∞–ª–∏—à–µ–Ω–æ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó

---

## üÜò –ü—Ä–æ–±–ª–µ–º–∏?

### "Can't reach database server"
```bash
docker-compose up db -d
```

### "Prisma Client not found"
```bash
npm run db:generate
```

### "Table does not exist"
```bash
npm run db:push
npm run db:seed
```

---

## üìö –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

- üìñ [PRISMA_QUICKSTART.md](./PRISMA_QUICKSTART.md) - —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
- üìñ [PRISMA_SETUP.md](./PRISMA_SETUP.md) - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
- üåê [Prisma Docs](https://www.prisma.io/docs) - –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–í–∞—à –ø—Ä–æ—î–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏ –∑ Prisma! üéâ

**–ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:**
1. –í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –∑—ñ "–®–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É"
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É API
3. –ó–∞–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞—Ä–∏–π `index.js` –Ω–∞ –Ω–æ–≤–∏–π
4. –ù–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å —Ä–æ–±–æ—Ç–æ—é –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö! üòä
